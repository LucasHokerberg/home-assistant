# Notify when a water sensor is wet
- alias: Security - Notify on water leakage
  trigger:
    platform: state
    entity_id: binary_sensor.basement_water_sensor,binary_sensor.kitchen_water_sensor
    to: wet
  action:
    service: notify.home_mobile_apps
    data_template:
      title: 'HalloNET Home'
      message: 'Leakage detected at {{ trigger.to_state.attributes.friendly_name }}!'
      data:
        channel: Security

# Notify when the freezer temperature is too high
- alias: Security - Notify on high freezer temperature
  trigger:
    platform: numeric_state
    entity_id: sensor.kitchen_freezer_temperature
    above: -10
    for:
      minutes: 10
  action:
    service: notify.home_mobile_apps
    data_template:
      title: 'HalloNET Home'
      message: 'Freezer temperature is too high!'
      data:
        channel: Security

# Notify when the fridge temperature is too high
- alias: Security - Notify on high fridge temperature
  trigger:
    platform: numeric_state
    entity_id: sensor.kitchen_fridge_temperature
    above: 15
    for:
      minutes: 10
  action:
    service: notify.home_mobile_apps
    data_template:
      title: 'HalloNET Home'
      message: 'Fridge temperature is too high!'
      data:
        channel: Security

# Notify when everyone leaves the home and the front door is unlocked
- alias: Security - Notify when door is unlocked
  trigger:
    platform: state
    entity_id: group.home_members
    from: 'home'
  condition:
    condition: state
    entity_id: lock.hallway_front_door
    state: 'unlocked'
  action:
    service: notify.home_mobile_apps
    data:
      title: 'HalloNET Home'
      message: 'Everyone left home, but the front door is unlocked!'
      data:
        channel: Security
        actions:
          - action: lock_hallway_front_door
            title: 'Lock Front Door'

- alias: Security - Notify when door is unlocked - Action
  trigger:
    platform: event
    event_type: mobile_app_notification_action
    event_data:
      action: lock_hallway_front_door
  action:
    service: lock.lock
    entity_id: lock.hallway_front_door